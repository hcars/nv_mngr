{"ast":null,"code":"var _jsxFileName = \"/home/henry/test/supra_coders_inv_mngr/frontend/src/views/ItemDetail.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport AuthContext from \"../context/AuthContext\";\nimport \"../styles/ItemDetail.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ItemDetail(props) {\n  _s();\n\n  let {\n    id\n  } = useParams();\n  const [item, setItem] = useState({});\n  const history = useHistory();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [edit, setEdit] = useState(false);\n  const [deleted, setDeleted] = useState(false);\n  useEffect(() => {\n    if (deleted) {\n      history.push(\"/user_items\");\n    }\n\n    axios.get(`http://localhost:8000/api/items/${id}/`).then(res => setItem(res.data)).catch(err => console.log(err));\n  }, [id]);\n\n  const handleSubmit = () => {\n    axios.delete(`http://localhost:8000/api/items/${id}/`).then(res => {\n      if (res.status === 204) {\n        history.push(\"/user_items\");\n        setDeleted(true);\n      } else {\n        alert(\"Failed to Delete!\");\n        setDeleted(false);\n      }\n    }).catch(err => console.log(err));\n  };\n\n  const handleEditSubmit = e => {\n    e.preventDefault();\n    const updatedItem = {\n      name: e.target.name.value,\n      description: e.target.description.value,\n      quantity: e.target.quantity.value\n    };\n    axios.put(`http://localhost:8000/api/items/${id}/`, updatedItem).then(res => {\n      if (res.status === 200) {\n        setEdit(false);\n        setItem(res.data);\n        alert(\"Changes Successfully Submitted!\");\n      } else {\n        alert(\"Failed to Update!\");\n      }\n    }).catch(err => console.log(err));\n  };\n\n  const handleEditClick = () => {\n    setEdit(true);\n  };\n\n  if (user && user.user_id === item.createdBy) {\n    if (edit) {\n      return /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleEditSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"name\",\n          defaultValue: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Description:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"description\",\n          defaultValue: item.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Submit Changes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", item.name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Description:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", item.description]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Created By:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", item.username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"delete-button\",\n            children: \"DELETE\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"edit-button\",\n          onClick: handleEditClick,\n          children: \"EDIT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this);\n    }\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Name:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" \", item.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Description:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" \", item.description]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Created By:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" \", item.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this);\n  }\n}\n\n_s(ItemDetail, \"UW9K+gA5X9DIqaP7fOIK7WGqMzc=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c = ItemDetail;\nexport default ItemDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"ItemDetail\");","map":{"version":3,"sources":["/home/henry/test/supra_coders_inv_mngr/frontend/src/views/ItemDetail.js"],"names":["React","useState","useEffect","useContext","useParams","axios","useHistory","AuthContext","ItemDetail","props","id","item","setItem","history","user","edit","setEdit","deleted","setDeleted","push","get","then","res","data","catch","err","console","log","handleSubmit","delete","status","alert","handleEditSubmit","e","preventDefault","updatedItem","name","target","value","description","quantity","put","handleEditClick","user_id","createdBy","username"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport AuthContext from \"../context/AuthContext\";\nimport \"../styles/ItemDetail.css\"\n\n\n\nfunction ItemDetail(props) {\n  let { id } = useParams();\n  const [item, setItem] = useState({});\n  const history = useHistory();\n  const { user } = useContext(AuthContext);\n  const [edit, setEdit] = useState(false);  \n  const [deleted, setDeleted] = useState(false);\n\n  useEffect(() => {\n    if (deleted){\n        history.push(\"/user_items\");\n    }\n    axios\n      .get(`http://localhost:8000/api/items/${id}/`)\n      .then(res => setItem(res.data))\n      .catch(err => console.log(err));\n  }, [id]);\n  const handleSubmit = () =>\n    {\n        axios\n        .delete(`http://localhost:8000/api/items/${id}/`)\n        .then(res => {\n            if(res.status === 204){\n                history.push(\"/user_items\");\n                setDeleted(true);\n            }\n            else {\n                alert(\"Failed to Delete!\");\n                setDeleted(false)\n            }\n        })\n        .catch(err => console.log(err));\n        \n    };\n\n    \n  \n    \n\n    const handleEditSubmit = (e) => {\n        e.preventDefault();\n        const updatedItem = {\n            name: e.target.name.value,\n            description: e.target.description.value,\n            quantity: e.target.quantity.value\n        };\n        axios\n        .put(`http://localhost:8000/api/items/${id}/`, updatedItem)\n        .then(res => {\n        if(res.status === 200){\n            setEdit(false);\n            setItem(res.data);\n            alert(\"Changes Successfully Submitted!\");\n        }\n        else {\n            alert(\"Failed to Update!\");\n        }\n        })\n        .catch(err => console.log(err));\n    };\n    const handleEditClick = () => {\n        setEdit(true);\n    };\n\n  \n\n    if ((user) && (user.user_id === item.createdBy)){\n        if (edit){\n            return (\n                <form onSubmit={handleEditSubmit}>\n                    <h1>Name:</h1>\n                    <input name=\"name\" defaultValue={item.name}/> \n                    <br></br>\n                    <h2>Description:</h2>\n                    <input name=\"description\" defaultValue={item.description}/> \n                    <button type=\"submit\">Submit Changes</button>\n                </form>\n            );\n        \n        }\n        else {\n            return (\n                <div>\n                <h1>Name:</h1>\n                <p> {item.name}</p>\n                <br></br>\n                <h2>Description:</h2>\n                <p> {item.description}</p>\n                <h2>Created By:</h2>\n                <p> {item.username}</p>\n                <form onSubmit={handleSubmit}>\n                <button type=\"submit\" className=\"delete-button\">DELETE</button>\n                </form>            \n                <button className=\"edit-button\" onClick={handleEditClick}>EDIT</button>\n                </div>\n            );\n        }\n    }\n    else{\n        return (\n            <div>\n            <h1>Name:</h1>\n            <p> {item.name}</p>\n            <br></br>\n            <h2>Description:</h2>\n            <p> {item.description}</p>\n            <h2>Created By:</h2>\n            <p> {item.username}</p>\n\n            </div>\n        );\n    }\n    \n}\n\nexport default ItemDetail;\n"]},"metadata":{},"sourceType":"module"}