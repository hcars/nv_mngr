{"ast":null,"code":"import _slicedToArray from\"/home/henry/test/supra_coders_inv_mngr/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import{useHistory}from\"react-router-dom\";import AuthContext from\"../context/AuthContext\";import\"../styles/ItemDetail.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ItemDetail(props){var _useParams=useParams(),id=_useParams.id;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),item=_useState2[0],setItem=_useState2[1];var history=useHistory();var _useContext=useContext(AuthContext),user=_useContext.user;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),edit=_useState4[0],setEdit=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),deleted=_useState6[0],setDeleted=_useState6[1];useEffect(function(){if(deleted){history.push(\"/user_items\");}axios.get(\"http://localhost:8000/api/items/\".concat(id,\"/\")).then(function(res){return setItem(res.data);}).catch(function(err){return console.log(err);});},[id]);var handleSubmit=function handleSubmit(){axios.delete(\"http://localhost:8000/api/items/\".concat(id,\"/\")).then(function(res){if(res.status===204){history.push(\"/user_items\");setDeleted(true);}else{alert(\"Failed to Delete!\");setDeleted(false);}}).catch(function(err){return console.log(err);});};var handleEditSubmit=function handleEditSubmit(e){e.preventDefault();var updatedItem={name:e.target.name.value,description:e.target.description.value,quantity:e.target.quantity.value};axios.put(\"http://localhost:8000/api/items/\".concat(id,\"/\"),updatedItem).then(function(res){if(res.status===200){setEdit(false);setItem(res.data);alert(\"Changes Successfully Submitted!\");}else{alert(\"Failed to Update!\");}}).catch(function(err){return console.log(err);});};var handleEditClick=function handleEditClick(){setEdit(true);};if(user&&user.user_id===item.createdBy){if(edit){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleEditSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"name\",defaultValue:item.name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"description\",defaultValue:item.description}),/*#__PURE__*/_jsx(\"h2\",{children:\"Quantity:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"quantity\",defaultValue:item.quantity}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit Changes\"})]});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Name:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",item.name]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"Description:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",item.description]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Quantity:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",item.quantity]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Created By:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",item.username]}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"delete-button\",children:\"DELETE\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"edit-button\",onClick:handleEditClick,children:\"EDIT\"})]});}}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Name:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",item.name]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"Description:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",item.description]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Quantity:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",item.quantity]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Created By:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\" \",item.username]})]});}}export default ItemDetail;","map":{"version":3,"sources":["/home/henry/test/supra_coders_inv_mngr/src/views/ItemDetail.js"],"names":["React","useState","useEffect","useContext","useParams","axios","useHistory","AuthContext","ItemDetail","props","id","item","setItem","history","user","edit","setEdit","deleted","setDeleted","push","get","then","res","data","catch","err","console","log","handleSubmit","delete","status","alert","handleEditSubmit","e","preventDefault","updatedItem","name","target","value","description","quantity","put","handleEditClick","user_id","createdBy","username"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { useHistory } from \"react-router-dom\";\nimport AuthContext from \"../context/AuthContext\";\nimport \"../styles/ItemDetail.css\"\n\n\n\nfunction ItemDetail(props) {\n  let { id } = useParams();\n  const [item, setItem] = useState({});\n  const history = useHistory();\n  const { user } = useContext(AuthContext);\n  const [edit, setEdit] = useState(false);  \n  const [deleted, setDeleted] = useState(false);\n\n  useEffect(() => {\n    if (deleted){\n        history.push(\"/user_items\");\n    }\n    axios\n      .get(`http://localhost:8000/api/items/${id}/`)\n      .then(res => setItem(res.data))\n      .catch(err => console.log(err));\n  }, [id]);\n  const handleSubmit = () =>\n    {\n        axios\n        .delete(`http://localhost:8000/api/items/${id}/`)\n        .then(res => {\n            if(res.status === 204){\n                history.push(\"/user_items\");\n                setDeleted(true);\n            }\n            else {\n                alert(\"Failed to Delete!\");\n                setDeleted(false)\n            }\n        })\n        .catch(err => console.log(err));\n        \n    };\n\n    \n  \n    \n\n    const handleEditSubmit = (e) => {\n        e.preventDefault();\n        const updatedItem = {\n            name: e.target.name.value,\n            description: e.target.description.value,\n            quantity: e.target.quantity.value,\n        };\n        axios\n        .put(`http://localhost:8000/api/items/${id}/`, updatedItem)\n        .then(res => {\n        if(res.status === 200){\n            setEdit(false);\n            setItem(res.data);\n            alert(\"Changes Successfully Submitted!\");\n        }\n        else {\n            alert(\"Failed to Update!\");\n        }\n        })\n        .catch(err => console.log(err));\n    };\n    const handleEditClick = () => {\n        setEdit(true);\n    };\n\n  \n\n    if ((user) && (user.user_id === item.createdBy)){\n        if (edit){\n            return (\n                <form onSubmit={handleEditSubmit}>\n                    <h1>Name:</h1>\n                    <input name=\"name\" defaultValue={item.name}/> \n                    <br></br>\n                    <h2>Description:</h2>\n                    <input name=\"description\" defaultValue={item.description}/> \n                    <h2>Quantity:</h2>\n                    <input name=\"quantity\" defaultValue={item.quantity}/> \n                    <button type=\"submit\">Submit Changes</button>\n                </form>\n            );\n        \n        }\n        else {\n            return (\n                <div>\n                <h1>Name:</h1>\n                <p> {item.name}</p>\n                <br></br>\n                <h2>Description:</h2>\n                <p> {item.description}</p>\n                <h2>Quantity:</h2>\n                <p> {item.quantity}</p>\n                <h2>Created By:</h2>\n                <p> {item.username}</p>\n                <form onSubmit={handleSubmit}>\n                <button type=\"submit\" className=\"delete-button\">DELETE</button>\n                </form>            \n                <button className=\"edit-button\" onClick={handleEditClick}>EDIT</button>\n                </div>\n            );\n        }\n    }\n    else{\n        return (\n            <div>\n            <h1>Name:</h1>\n            <p> {item.name}</p>\n            <br></br>\n            <h2>Description:</h2>\n            <p> {item.description}</p>\n            <h2>Quantity:</h2>\n            <p> {item.quantity}</p>\n            <h2>Created By:</h2>\n            <p> {item.username}</p>\n\n            </div>\n        );\n    }\n    \n}\n\nexport default ItemDetail;\n"]},"metadata":{},"sourceType":"module"}